<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>Content Manager - Guru Nanak Tour & Travels</title>
  
  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  
  <style>
    /* Custom CMS Styling */
    :root {
      --brand-primary: #0e5aa7;
      --brand-secondary: #f59e0b;
    }
    
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    
    /* Loading Screen */
    .cms-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(135deg, var(--brand-primary) 0%, var(--brand-secondary) 100%);
      color: white;
      font-size: 24px;
      font-weight: 600;
    }
    
    .cms-loading::after {
      content: "";
      margin-left: 10px;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="cms-loading">Loading Content Manager</div>
  
  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.1.0/dist/decap-cms.js"></script>
  
  <!-- Custom CMS Configuration -->
  <script>
    // Custom preview styles
    CMS.registerPreviewStyle("/assets/css/common.css");
    
    // Custom preview templates
    CMS.registerPreviewTemplate("tours", ({ entry, widgetFor }) => {
      const data = entry.getIn(['data']).toJS();
      return `
        <div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: sans-serif;">
          <img src="${data.image}" alt="${data.name}" style="width: 100%; border-radius: 8px; margin-bottom: 20px;" />
          <h1 style="color: #0e5aa7; margin-bottom: 10px;">${data.name}</h1>
          <p style="font-size: 18px; color: #666; margin-bottom: 20px;">${data.summary}</p>
          <div style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div style="font-size: 24px; font-weight: bold; color: #0e5aa7;">₹${data.price?.toLocaleString('en-IN')}</div>
            <div style="color: #666;">⏱️ ${data.duration}</div>
          </div>
          ${widgetFor('description')}
        </div>
      `;
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.querySelector('.cms-loading').style.display = 'none';
      }, 1000);
    });
  </script>
</body>
</html>
